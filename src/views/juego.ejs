<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/jpeg" href="https://static.vecteezy.com/system/resources/previews/014/384/856/large_2x/cute-cat-reading-book-cartoon-icon-illustration-animal-education-icon-concept-isolated-premium-flat-cartoon-style-vector.jpg">
    <title>Juego - Aprende V y B</title>
    <link rel="stylesheet" href="main.css">
    <style>
        [tabindex="0"]:focus {
            outline: 3px solid #2196F3;
            outline-offset: 4px;
        }

        .option:focus {
            outline: 3px solid #FF9800;
            outline-offset: 4px;
        }
    </style>
</head>
<body style="background-image: url('https://i.pinimg.com/736x/f5/66/83/f56683902beb363db6d29ec1fd3a507d.jpg'); 
background-size: cover; 
background-position: center center; 
background-attachment: fixed;">
    <div class="game-container" role="main" aria-labelledby="game-title">
        <div class="header">
            <h1 id="game-title">¬°Aprende V y B!</h1>
            <div class="timer" aria-live="polite">Tiempo: <span id="countdown">8</span>s</div>
            <div class="score">Correctas: <span id="score">0</span>/10</div>
        </div>

        <div class="question-container">
            <h2 id="question" tabindex="0">¬øCu√°l es la palabra correcta?</h2>
            <div class="options-grid">
                <button class="option" onclick="checkAnswer(0)" aria-label="Opci√≥n 1"></button>
                <button class="option" onclick="checkAnswer(1)" aria-label="Opci√≥n 2"></button>
                <button class="option" onclick="checkAnswer(2)" aria-label="Opci√≥n 3"></button>
                <button class="option" onclick="checkAnswer(3)" aria-label="Opci√≥n 4"></button>
            </div>
        </div>

        <div id="feedback" class="feedback hidden" aria-live="polite"></div>
        <button id="next" class="next-button hidden" onclick="nextQuestion()">Siguiente</button>
    </div>

    <script>
        const questions = [
            {
                question: "¬øCu√°l es la forma correcta?",
                options: ["bivir", "vivir", "biv√≠r", "viv√≠r"],
                correct: 1,
                explanation: "Se escribe 'vivir' con V"
            },
            {
                question: "Selecciona la palabra correcta:",
                options: ["bisiesto", "visierto", "bisiesto", "visierto"],
                correct: 0,
                explanation: "La palabra correcta es 'bisiesto', con 'b', que se refiere a un a√±o con 366 d√≠as."
            },
            {
                question: "¬øCu√°l est√° bien escrita?",
                options: ["veber", "beber", "vever", "bever"],
                correct: 1,
                explanation: "Se escribe 'beber' con B"
            },
            {
                question: "Elige la correcta:",
                options: ["voca", "boca", "voka", "boka"],
                correct: 1,
                explanation: "Se escribe 'boca' con B"
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let timer;
        let timeLeft;
        let hasAnswered = false;

        function startTimer() {
            timeLeft = 8;
            document.getElementById('countdown').textContent = timeLeft;
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('countdown').textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    handleTimeout();
                }
            }, 1000);
        }

        function handleTimeout() {
            if (!hasAnswered) {
                const feedback = document.getElementById('feedback');
                feedback.textContent = "¬°Se acab√≥ el tiempo! " + questions[currentQuestion].explanation;
                feedback.className = 'feedback error';
                disableOptions();
                feedback.classList.remove('hidden'); // Muestra el feedback
                document.getElementById('next').classList.remove('hidden'); // Habilita el bot√≥n "Siguiente"
            }
        }

        function disableOptions() {
            const options = document.querySelectorAll('.option');
            options.forEach(option => option.disabled = true);
        }

        function enableOptions() {
            const options = document.querySelectorAll('.option');
            options.forEach(option => {
                option.disabled = false;
                option.classList.remove('correct', 'incorrect');
            });
        }

        function checkAnswer(selected) {
            clearInterval(timer);
            hasAnswered = true;
            const correct = questions[currentQuestion].correct;
            const feedback = document.getElementById('feedback');
            const options = document.querySelectorAll('.option');
            
            options[selected].classList.add(selected === correct ? 'correct' : 'incorrect');
            options[correct].classList.add('correct');
            
            if (selected === correct) {
                score++;
                document.getElementById('score').textContent = score;
                feedback.textContent = "¬°Correcto! " + questions[currentQuestion].explanation;
                feedback.className = 'feedback correct';
            } else {
                feedback.textContent = "Incorrecto. " + questions[currentQuestion].explanation;
                feedback.className = 'feedback error';
            }
            
            feedback.classList.remove('hidden');
            document.getElementById('next').classList.remove('hidden');
            disableOptions();
        }

        function nextQuestion() {
            currentQuestion++;
            if (currentQuestion >= questions.length) {
                showFinalScore();
                return;
            }

            hasAnswered = false;
            document.getElementById('feedback').classList.add('hidden');
            document.getElementById('next').classList.add('hidden');
            loadQuestion();
            enableOptions();
            startTimer();
        }

        function showFinalScore() {
            const container = document.querySelector('.game-container');
            container.innerHTML = `
                <h2>¬°Juego terminado! üèÜ</h2>
                <p>Tu puntuaci√≥n final: ${score}/${questions.length}</p>
                <button class="next-button" onclick="window.location.reload()">Jugar de nuevo üîÑ</button>
            `;
        }

        function loadQuestion() {
            const question = questions[currentQuestion];
            document.getElementById('question').textContent = question.question;
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                option.textContent = question.options[index];
                option.setAttribute('aria-label', question.options[index]);
            });
        }

        // Iniciar el juego
        loadQuestion();
        startTimer();
    </script>
</body>
</html>
